{
  "indexes": [
    {
      "__comment": "既存のインデックス - 日付とステータスでのフィルタリング",
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "date",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "status",
          "order": "ASCENDING"
        }
      ]
    },
    {
      "__comment": "既存のインデックス - ユーザー別予約の取得（降順）",
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "customerId",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "date",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "__comment": "既存のインデックス - 日付と時間でのソート",
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "date",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "time",
          "order": "ASCENDING"
        }
      ]
    },
    {
      "__comment": "最適化: 管理者用の日付降順インデックス",
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "date",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "__comment": "最適化: 月次availability確認用の複合インデックス",
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "date",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "status",
          "array": true
        }
      ]
    },
    {
      "__comment": "将来の最適化: select()を使用する場合のインデックス（必要時にコメント解除）",
      "__fields_to_index": [
        "customerId",
        "date",
        "time",
        "status",
        "serviceName",
        "price"
      ],
      "__note": "select()を使用する場合は、上記フィールドを含む複合インデックスが必要"
    }
  ],
  "fieldOverrides": [
    {
      "__comment": "dateフィールドのインデックス最適化",
      "collectionGroup": "reservations",
      "fieldPath": "date",
      "indexes": [
        {
          "order": "ASCENDING",
          "queryScope": "COLLECTION"
        },
        {
          "order": "DESCENDING",
          "queryScope": "COLLECTION"
        }
      ]
    },
    {
      "__comment": "statusフィールドのarray-containsクエリ最適化",
      "collectionGroup": "reservations",
      "fieldPath": "status",
      "indexes": [
        {
          "arrayConfig": "CONTAINS",
          "queryScope": "COLLECTION"
        }
      ]
    }
  ]
}